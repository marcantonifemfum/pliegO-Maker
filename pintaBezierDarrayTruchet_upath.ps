%!
%% a partir d'arrays de coordenades Bézier extretes de lligaVectorials.ps els hi activem l'upath i el deixem a l'stack
%% aplicant sempre un valor d'escala /alacse no pas amb l'operador scale sinó com un multiplicador
%% quan aquest algorisme és cridat per enflataGlifs2_plegaVeu.ps comprovem el sentit en que ha estat pintada

%% aquestes dues arrays de Béziers es pinten en sentits contraris?

[
 [
  [[11.0 5.5] [11.0 5.77578115] [10.7757816 6.0] [10.5 6.0]]
  [[10.5 6.0] [10.2242184 6.0] [10.0 5.77578115] [10.0 5.5]]
  [[10.0 5.5] [10.0 5.22421885] [9.77578163 5.0] [9.5 5.0]]
  [[9.5 5.0] [9.22421837 5.0] [9.0 4.77578115] [9.0 4.5]]
  [[9.0 4.5] [9.0 4.22421885] [9.22421837 4.0] [9.5 4.0]]
  [[9.5 4.0] [9.77578163 4.0] [10.0 4.22421885] [10.0 4.5]]
  [[10.0 4.5] [10.0 4.77578115] [10.2242184 5.0] [10.5 5.0]]
  [[10.5 5.0] [10.7757816 5.0] [11.0 5.22421885] [11.0 5.5]] true
 ]

 [
  [[1.0 2.5] [1.0 2.77578115] [0.775781274 3.0] [0.5 3.0]]
  [[0.5 3.0] [0.224218756 3.0] [0.0 2.77578115] [0.0 2.5]]
  [[0.0 2.5] [0.0 2.22421885] [0.224218756 2.0] [0.5 2.0]]
  [[0.5 2.0] [0.775781274 2.0] [1.0 1.77578127] [1.0 1.5]]
  [[1.0 1.5] [1.0 1.22421873] [1.22421873 1.0] [1.5 1.0]]
  [[1.5 1.0] [1.77578127 1.0] [2.0 1.22421873] [2.0 1.5]]
  [[2.0 1.5] [2.0 1.77578127] [1.77578127 2.0] [1.5 2.0]]
  [[1.5 2.0] [1.22421873 2.0] [1.0 2.22421885] [1.0 2.5]] true
 ]

 [
  [[1.0 1.5] [1.0 1.77578127] [0.775781274 2.0] [0.5 2.0]]
  [[0.5 2.0] [0.224218756 2.0] [0.0 1.77578127] [0.0 1.5]]
  [[0.0 1.5] [0.0 1.22421873] [0.224218756 1.0] [0.5 1.0]]
  [[0.5 1.0] [0.775781274 1.0] [1.0 1.22421873] [1.0 1.5]] true
 ]

 [
  [[2.0 0.5] [2.0 0.775781274] [1.77578127 1.0] [1.5 1.0]]
  [[1.5 1.0] [1.22421873 1.0] [1.0 0.775781274] [1.0 0.5]]
  [[1.0 0.5] [1.0 0.224218756] [1.22421873 0.0] [1.5 0.0]]
  [[1.5 0.0] [1.77578127 0.0] [2.0 0.224218756] [2.0 0.5]] true
 ]

 [
  [[-0.5 1.0] [-0.224218756 1.0] [0.0 1.22421873] [0.0 1.5]]
  [[0.0 1.5] [0.0 1.77578127] [0.224218756 2.0] [0.5 2.0]]
  [[0.5 2.0] [0.775781274 2.0] [1.0 1.77578127] [1.0 1.5]]
  [[1.0 1.5] [1.0 1.22421873] [0.775781274 1.0] [0.5 1.0]]
  [[0.5 1.0] [0.224218756 1.0] [0.0 0.775781274] [0.0 0.5]]
  [[0.0 0.5] [0.0 0.224218756] [-0.224218756 0.0] [-0.5 0.0]] false
 ]

 [
  [[2.5 1.0] [2.22421885 1.0] [2.0 1.22421873] [2.0 1.5]]
  [[2.0 1.5] [2.0 1.77578127] [1.77578127 2.0] [1.5 2.0]]
  [[1.5 2.0] [1.22421873 2.0] [1.0 1.77578127] [1.0 1.5]]
  [[1.0 1.5] [1.0 1.22421873] [0.775781274 1.0] [0.5 1.0]]
  [[0.5 1.0] [0.224218756 1.0] [0.0 0.775781274] [0.0 0.5]]
  [[0.0 0.5] [0.0 0.224218756] [0.224218756 0.0] [0.5 0.0]]
  [[0.5 0.0] [0.775781274 0.0] [1.0 0.224218756] [1.0 0.5]]
  [[1.0 0.5] [1.0 0.775781274] [1.22421873 1.0] [1.5 1.0]]
  [[1.5 1.0] [1.77578127 1.0] [2.0 0.775781274] [2.0 0.5]]
  [[2.0 0.5] [2.0 0.224218756] [1.77578127 0.0] [1.5 0.0]]
  [[1.5 0.0] [1.22421873 0.0] [1.0 -0.224218756] [1.0 -0.5]] false
 ]

 [
  [[1.5 2.0] [1.22421873 2.0] [1.0 1.77578127] [1.0 1.5]]
  [[1.0 1.5] [1.0 1.22421873] [0.775781274 1.0] [0.5 1.0]]
  [[0.5 1.0] [0.224218756 1.0] [0.0 0.775781274] [0.0 0.5]]
  [[0.0 0.5] [0.0 0.224218756] [0.224218756 0.0] [0.5 0.0]]
  [[0.5 0.0] [0.775781274 0.0] [1.0 0.224218756] [1.0 0.5]]
  [[1.0 0.5] [1.0 0.775781274] [1.22421873 1.0] [1.5 1.0]] false
 ]

 [
  [[1.0 -0.5] [1.0 -0.224218756] [1.22421873 0.0] [1.5 0.0]]
  [[1.5 0.0] [1.77578127 0.0] [2.0 0.224218756] [2.0 0.5]]
  [[2.0 0.5] [2.0 0.775781274] [1.77578127 1.0] [1.5 1.0]] false
 ]

] 0 get


/alacse 100 def
%<</PageSize[300 300]>>setpagedevice

%alacse dup scale  %% treballem amb Béziers que tenen valors només de 0 a 2

%1 0 0 setrgbcolor 0 0 .01 .01 rectfill
%showpage quit

%0 setlinewidth
%.5 .5 translate  %% dibuixem des del centre del cairó

%0 1 1
%{  %% for
% dup
% [ {1 0 0 setrgbcolor} {0 0 1 setrgbcolor} ]
% exch get cvx exec
% lesCorbes exch get

 {  %% forall
  dup type /booleantype eq
  {
   {
    closepath false upath  %% deixem l'upath a l'stack  %==
    %stroke
   }
   {
    %currentpoint
    false upath  %% deixem l'upath a l'stack  %==
    %stroke
   }ifelse
  }
  {
   /i 0 def
   {  %% forall
    i 0 eq
    {
     %cvx exec
     {  %% així és com podem aplicar l'escala
      alacse mul
     }forall
     moveto
 %% marca el cap
% gsave 1 1 0 setrgbcolor currentpoint .01 .01 rectfill grestore
    }
    {
     %cvx exec
     {  %% així és com podem aplicar l'escala
      alacse mul
     }forall
    }ifelse
    i 1 add /i exch def
   }forall
   curveto
  }ifelse
 }forall

 %% marca la cua
% gsave 0 0 0 setrgbcolor .01 .01 rectfill grestore
%}for

%showpage

